package com.wg.service;

import com.wg.dto.WgDataDto;
import com.wg.util.HexUtil;
import org.junit.Before;
import org.junit.jupiter.api.Test;

import java.awt.*;
import java.util.Arrays;
import java.util.Calendar;
import java.util.Date;


class WgServiceTest {
    private WgService wgService = new WgService();


    @Test
    public void getSearchDeviceCommand() {
        print(wgService.getSearchDeviceCommand());
    }

    @Test
    public void getSetServerCommand() {
        print(wgService.getSetServerCommand("1D85B50D","192.168.168.123","255.255.255.0", "192.168.168.254"));
    }

    @Test
    public void acceptData() {
        byte[] data1 = new byte[]{0x17,0x20,0x00,0x00,0x1D, (byte) 0x85, (byte) 0xB5,0x0D,0x04,0x00,0x00,0x00,0x01,0x00,0x01,0x01,0x0D, (byte) 0xD7,0x37,0x00,0x20,0x13,0x04,0x03,0x21,0x09,0x24,0x06,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x22,0x28,0x26,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
        byte[] data2 = new byte[]{0x17,0x20,0x00,0x00,0x1D, (byte) 0x85, (byte) 0xB5,0x0D,0x04,0x00,0x00,0x00,0x01,0x00,0x01,0x01,0x0D, (byte) 0xD7,0x37,0x00,0x20,0x15,0x04,0x29,0x16,0x37,0x39,0x06,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x16,0x42,0x25,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x15,0x04,0x29,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};

        System.out.println(new WgDataDto(data1).toString());
        System.out.println(new WgDataDto(data2).toString());

    }

    @Test
    public void testGetSetTargetCommand(){
        print(wgService.getSetTargetCommand("1D85B50D","192.168.168.101",61005,0));
    }


    private void print(byte[] bytes){
        String[] strings = HexUtil.toHexStringArray(bytes, false);
        System.out.println(Arrays.toString(strings)
                .replaceAll(",", "")
                .replaceAll("\\[","")
                .replaceAll("]",""));
    }
}